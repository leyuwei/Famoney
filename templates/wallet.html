{{define "content"}}
<h2>{{.Wallet.Name}}</h2>
{{range $cur, $bal := .Wallet.Balances}}
<p>{{T "Balance"}}: {{$bal}} {{$cur}}</p>
{{end}}

<details class="mb-4">
<summary>{{T "Add"}} {{T "Amount"}}</summary>
<form method="POST" action="/famoney/wallet/{{.Wallet.ID}}" class="mt-2">
  <input type="hidden" name="action" value="flow">
  <div class="row g-2">
    <div class="col-md-2"><input class="form-control" name="amount" placeholder="{{T "Amount"}}"></div>
    <div class="col-md-2">
      <select name="currency" class="form-select">
        {{range $.Currencies}}
          <option value="{{.}}">{{.}}</option>
        {{end}}
      </select>
    </div>
    <div class="col-md-3">
      <select name="category" class="form-select">
        {{range $id, $c := .Categories}}
          <option value="{{$id}}">{{$c.Name}}</option>
        {{end}}
      </select>
    </div>
    <div class="col-md-3"><input class="form-control" name="description" placeholder="{{T "Description"}}"></div>
    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">{{T "Submit"}}</button></div>
  </div>
</form>
</details>

<details class="mb-4">
<summary>{{T "UpdateBalance"}}</summary>
<form method="POST" action="/famoney/wallet/{{.Wallet.ID}}" class="mt-2">
  <input type="hidden" name="action" value="balance">
  <div class="row g-2">
    <div class="col-md-2"><input class="form-control" name="amount" placeholder="{{T "Balance"}}"></div>
    <div class="col-md-2">
      <select name="currency" class="form-select">
        {{range $.Currencies}}
          <option value="{{.}}">{{.}}</option>
        {{end}}
      </select>
    </div>
    <div class="col-md-3">
      <select name="category" class="form-select">
        {{range $id, $c := .Categories}}
          <option value="{{$id}}">{{$c.Name}}</option>
        {{end}}
      </select>
    </div>
    <div class="col-md-3"><input class="form-control" name="description" placeholder="{{T "Description"}}"></div>
    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">{{T "Submit"}}</button></div>
  </div>
</form>
</details>

<details class="mb-4">
<summary>{{T "ShareWallet"}}</summary>
<form method="POST" action="/famoney/wallet/{{.Wallet.ID}}" class="mt-2">
  <input type="hidden" name="action" value="share">
  <div class="row g-2">
    <div class="col-md-6"><input class="form-control" name="username" list="userlist" placeholder="{{T "Username"}}"></div>
    <datalist id="userlist">
      {{range .Users}}<option value="{{.}}">{{.}}</option>{{end}}
    </datalist>
    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">{{T "Submit"}}</button></div>
  </div>
</form>
</details>

<details class="mb-4">
<summary>{{T "EditWallet"}}</summary>
<form method="POST" action="/famoney/wallet/{{.Wallet.ID}}" class="mt-2">
  <input type="hidden" name="action" value="rename">
  <div class="row g-2">
    <div class="col-md-6"><input class="form-control" name="name" value="{{.Wallet.Name}}"></div>
    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">{{T "Submit"}}</button></div>
  </div>
</form>
</details>

<h3>Flows</h3>
<table class="table table-striped">
<thead><tr><th>{{T "Amount"}}</th><th>{{T "Category"}}</th><th>{{T "Description"}}</th><th>Time</th></tr></thead>
<tbody>
{{range .Flows}}
<tr>
  <td>{{.Amount}}</td>
  <td>{{(index $.Categories .CategoryID).Name}}</td>
  <td>{{.Description}}</td>
  <td>{{.CreatedAt}}</td>
</tr>
{{else}}
<tr><td colspan="4">No flows</td></tr>
{{end}}
</tbody>
</table>
{{end}}
